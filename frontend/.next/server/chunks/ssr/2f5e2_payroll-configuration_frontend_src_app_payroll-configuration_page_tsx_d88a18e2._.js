module.exports=[74614,a=>{"use strict";var b=a.i(19330),c=a.i(13367);function d({isOpen:a,title:c,children:d,onClose:e,size:f="md"}){return a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,b.jsxs)("div",{className:`bg-white rounded-lg shadow-xl ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"}[f]}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:c}),(0,b.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"p-6 max-h-96 overflow-y-auto",children:d})]})}):null}function e({label:a,name:c,type:d="text",value:e,onChange:f,required:g=!1,disabled:h=!1,error:i,placeholder:j,children:k,options:l}){let m="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition text-black bg-white";return(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-gray-700 font-medium mb-2",children:[a,g&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===d?(0,b.jsx)("textarea",{name:c,value:e,onChange:f,required:g,disabled:h,placeholder:j,className:`${m} ${h?"bg-gray-100 cursor-not-allowed":""}`,rows:4}):"select"===d?(0,b.jsxs)("select",{name:c,value:e,onChange:f,required:g,disabled:h,className:`${m} ${h?"bg-gray-100 cursor-not-allowed":""}`,children:[(0,b.jsxs)("option",{value:"",children:["Select ",a]}),l?.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))]}):(0,b.jsx)("input",{type:d,name:c,value:e,onChange:f,required:g,disabled:h,placeholder:j,className:`${m} ${h?"bg-gray-100 cursor-not-allowed":""}`}),i&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:i})]})}function f({onSubmit:a,children:c,isSubmitting:d=!1,submitLabel:e="Save",cancelLabel:f="Cancel",onCancel:g}){return(0,b.jsxs)("form",{onSubmit:a,className:"space-y-6",children:[c,(0,b.jsxs)("div",{className:"flex gap-3 justify-end pt-6 border-t border-gray-200",children:[g&&(0,b.jsx)("button",{type:"button",onClick:g,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition",disabled:d,children:f}),(0,b.jsxs)("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[d&&(0,b.jsx)("span",{className:"animate-spin",children:"âŒ›"}),e]})]})]})}function g({data:a,columns:d,onEdit:e,onView:f,onDelete:g,isLoading:h=!1,emptyMessage:i="No data available"}){let[j,k]=(0,c.useState)([]);return h?(0,b.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):0===a.length?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:i})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-100 border-b border-gray-200",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:(0,b.jsx)("input",{type:"checkbox",checked:j.length===a.length&&a.length>0,onChange:()=>{j.length===a.length?k([]):k(a.map(a=>a._id||a.id))},className:"rounded"})}),d.map(a=>(0,b.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:a.label},a.key)),(e||f||g)&&(0,b.jsx)("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("input",{type:"checkbox",checked:j.includes(a._id||a.id),onChange:()=>{var b;return b=a._id||a.id,void k(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},className:"rounded"})}),d.map(c=>(0,b.jsx)("td",{className:"px-4 py-3 text-gray-700",children:c.render?c.render(a[c.key],a):a[c.key]},`${a._id||a.id}-${c.key}`)),(e||f||g)&&(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex justify-center gap-2",children:[f&&(0,b.jsx)("button",{onClick:()=>f(a),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-sm font-medium transition",children:"View"}),e&&"draft"===a.status&&(0,b.jsx)("button",{onClick:()=>e(a),className:"px-3 py-1 text-green-600 hover:bg-green-50 rounded text-sm font-medium transition",children:"Edit"}),g&&"draft"===a.status&&(0,b.jsx)("button",{onClick:()=>g(a),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded text-sm font-medium transition",children:"Delete"})]})})]},a._id||a.id||c))})]})})}function h({title:a,data:c,columns:d,onAdd:e,onEdit:f,onView:h,onDelete:i,isLoading:j=!1,emptyMessage:k="No data available"}){return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:a}),(0,b.jsxs)("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition flex items-center gap-2",children:[(0,b.jsx)("span",{children:"+"})," Add New"]})]}),(0,b.jsx)(g,{data:c,columns:d,onEdit:f,onView:h,onDelete:i,isLoading:j,emptyMessage:k})]})}function i({item:a,fields:c,onClose:e}){return(0,b.jsx)(d,{isOpen:!!a,title:"View Details",onClose:e,size:"lg",children:(0,b.jsx)("div",{className:"space-y-4",children:c.map(c=>(0,b.jsxs)("div",{className:"border-b pb-3",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-600",children:c.label}),(0,b.jsx)("p",{className:"text-gray-900 mt-1",children:c.render?c.render(a[c.key]):a[c.key]})]},c.key))})})}function j({status:a,size:c="md"}){return(0,b.jsx)("span",{className:`font-semibold rounded-full ${{sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-2 text-base"}[c]} ${{draft:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[a]}`,children:{draft:"Draft",approved:"Approved",rejected:"Rejected"}[a]})}let k=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",l={async get(a){let b=await fetch(`${k}${a}`,{method:"GET"});if(!b.ok){let a=await b.json().catch(()=>null);throw Error(a?.message||`API Error: ${b.status}`)}return b.json()},async post(a,b){console.log("API POST:",a,b);let c=await fetch(`${k}${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.json().catch(()=>null);throw Error(a?.message||`API Error: ${c.status}`)}return c.json()},async patch(a,b){let c=await fetch(`${k}${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.json().catch(()=>null);throw Error(a?.message||`API Error: ${c.status}`)}return c.json()},async delete(a){let b=await fetch(`${k}${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json().catch(()=>null);throw Error(a?.message||`API Error: ${b.status}`)}if(204!==b.status)return b.json()}},m=Object.entries({DEDUCTION:"Deduction",ALLOWANCE:"Allowance",BENEFIT:"Benefit",MISCONDUCT:"Misconduct",LEAVE:"Leave"}).map(([a,b])=>({label:b,value:b})),n=Object.entries({ALL_EMPLOYEES:"All Employees",FULL_TIME:"Full Time Employees",PART_TIME:"Part Time Employees",CONTRACTORS:"Contractors"}).map(([a,b])=>({label:b,value:b})),o=Object.entries({HOURLY:"hourly",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",CONTRACT_BASED:"contract_based"}).map(([a,b])=>({label:b.charAt(0).toUpperCase()+b.slice(1),value:b}));function p(){let[a,g]=(0,c.useState)([]),[k,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)({policyName:"",policyType:"",description:"",effectiveDate:"",ruleDefinition:{percentage:"",fixedAmount:"",threshold:""},applicability:""});(0,c.useEffect)(()=>{B()},[]);let B=async()=>{try{o(!0);let a=await l.get("/payroll-configuration/payroll-policies");g(Array.isArray(a)?a:[])}catch(a){console.error("Error fetching policies:",a),y("Failed to load policies")}finally{o(!1)}},C=a=>{let{name:b,value:c}=a.target;if(b.startsWith("rule_")){let a=b.replace("rule_","");A(b=>({...b,ruleDefinition:{...b.ruleDefinition,[a]:""===c?"":parseFloat(c)}}))}else A(a=>({...a,[b]:c}))},D=async a=>{a.preventDefault(),w(!0),y("");try{if(!z.policyName.trim()){y("Policy name is required"),w(!1);return}if(!z.policyType){y("Policy type is required"),w(!1);return}if(!z.description.trim()){y("Description is required"),w(!1);return}if(!z.effectiveDate){y("Effective date is required"),w(!1);return}if(!z.applicability){y("Applicability is required"),w(!1);return}let a={...z,ruleDefinition:{...""!==z.ruleDefinition.percentage&&{percentage:Number(z.ruleDefinition.percentage)},...""!==z.ruleDefinition.fixedAmount&&{fixedAmount:Number(z.ruleDefinition.fixedAmount)},...""!==z.ruleDefinition.threshold&&{threshold:Number(z.ruleDefinition.threshold)}}};t?await l.patch(`/payroll-configuration/payroll-policies/${t._id}`,a):await l.post("/payroll-configuration/payroll-policies",a),await B(),q(!1),F()}catch(a){y(a.message||"Failed to save policy")}finally{w(!1)}},E=async a=>{if(window.confirm("Are you sure you want to delete this policy?"))try{await l.delete(`/payroll-configuration/payroll-policies/${a._id}`),await B()}catch(a){y(a.message||"Failed to delete policy")}},F=()=>{A({policyName:"",policyType:"",description:"",effectiveDate:"",ruleDefinition:{percentage:"",fixedAmount:"",threshold:""},applicability:""}),u(null)},G=[{key:"policyName",label:"Policy Name"},{key:"policyType",label:"Type"},{key:"applicability",label:"Applicability"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Payroll Policies",data:a,columns:G,onAdd:()=>{F(),q(!0)},onEdit:a=>{u(a),A({policyName:a.policyName,policyType:a.policyType,description:a.description,effectiveDate:a.effectiveDate.split("T")[0],ruleDefinition:{percentage:a.ruleDefinition.percentage?.toString()||"",fixedAmount:a.ruleDefinition.fixedAmount?.toString()||"",threshold:a.ruleDefinition.threshold?.toString()||""},applicability:a.applicability}),q(!0)},onView:s,onDelete:E,isLoading:k,emptyMessage:"No payroll policies configured yet"}),(0,b.jsx)(d,{isOpen:p,title:t?"Edit Payroll Policy":"Create Payroll Policy",onClose:()=>q(!1),size:"lg",children:(0,b.jsxs)(f,{onSubmit:D,isSubmitting:v,onCancel:()=>q(!1),submitLabel:t?"Update":"Create",children:[x&&(0,b.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:x}),(0,b.jsx)(e,{label:"Policy Name",name:"policyName",value:z.policyName,onChange:C,required:!0}),(0,b.jsx)(e,{label:"Policy Type",name:"policyType",type:"select",value:z.policyType,onChange:C,options:m,required:!0}),(0,b.jsx)(e,{label:"Description",name:"description",type:"textarea",value:z.description,onChange:C,required:!0}),(0,b.jsx)(e,{label:"Effective Date",name:"effectiveDate",type:"date",value:z.effectiveDate,onChange:C,required:!0}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Rule Definition"}),(0,b.jsx)(e,{label:"Percentage (%)",name:"rule_percentage",type:"number",value:z.ruleDefinition.percentage,onChange:C}),(0,b.jsx)(e,{label:"Fixed Amount",name:"rule_fixedAmount",type:"number",value:z.ruleDefinition.fixedAmount,onChange:C}),(0,b.jsx)(e,{label:"Threshold",name:"rule_threshold",type:"number",value:z.ruleDefinition.threshold,onChange:C})]}),(0,b.jsx)(e,{label:"Applicability",name:"applicability",type:"select",value:z.applicability,onChange:C,options:n,required:!0})]})}),r&&(0,b.jsx)(i,{item:r,fields:[{key:"policyName",label:"Policy Name"},{key:"policyType",label:"Policy Type"},{key:"description",label:"Description"},{key:"effectiveDate",label:"Effective Date",render:a=>new Date(a).toLocaleDateString()},{key:"ruleDefinition",label:"Rule Definition",render:a=>`Percentage: ${a.percentage}%, Fixed: ${a.fixedAmount}, Threshold: ${a.threshold}`},{key:"applicability",label:"Applicability"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>s(null)})]})}function q(){let[a,g]=(0,c.useState)([]),[k,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({grade:"",baseSalary:"",grossSalary:""});(0,c.useEffect)(()=>{z()},[]);let z=async()=>{try{m(!0);let a=await l.get("/payroll-configuration/pay-grades");g(Array.isArray(a)?a:[])}catch(a){console.error("Error fetching pay grades:",a),w("Failed to load pay grades")}finally{m(!1)}},A=a=>{let{name:b,value:c}=a.target;y(a=>({...a,[b]:c}))},B=async a=>{a.preventDefault(),u(!0),w("");try{let a={grade:x.grade,baseSalary:parseFloat(x.baseSalary),grossSalary:parseFloat(x.grossSalary)};console.log("Sending payload:",JSON.stringify(a)),r?await l.patch(`/payroll-configuration/pay-grades/${r._id}`,a):await l.post("/payroll-configuration/pay-grades",a),await z(),o(!1),D()}catch(a){w(a.message||"Failed to save pay grade")}finally{u(!1)}},C=async a=>{if(window.confirm("Are you sure you want to delete this pay grade?"))try{await l.delete(`/payroll-configuration/pay-grades/${a._id}`),await z()}catch(a){w(a.message||"Failed to delete pay grade")}},D=()=>{y({grade:"",baseSalary:"",grossSalary:""}),s(null)},E=[{key:"grade",label:"Grade / Position"},{key:"baseSalary",label:"Base Salary",render:a=>`$${a.toLocaleString()}`},{key:"grossSalary",label:"Gross Salary",render:a=>`$${a.toLocaleString()}`},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Pay Grades",data:a,columns:E,onAdd:()=>{D(),o(!0)},onEdit:a=>{s(a),y({grade:a.grade,baseSalary:a.baseSalary.toString(),grossSalary:a.grossSalary.toString()}),o(!0)},onView:q,onDelete:C,isLoading:k,emptyMessage:"No pay grades configured yet"}),(0,b.jsx)(d,{isOpen:n,title:r?"Edit Pay Grade":"Create Pay Grade",onClose:()=>o(!1),size:"md",children:(0,b.jsxs)(f,{onSubmit:B,isSubmitting:t,onCancel:()=>o(!1),submitLabel:r?"Update":"Create",children:[v&&(0,b.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:v}),(0,b.jsx)(e,{label:"Grade / Position",name:"grade",value:x.grade,onChange:A,placeholder:"e.g., Senior Developer, Mid-Level TA",required:!0}),(0,b.jsx)(e,{label:"Base Salary",name:"baseSalary",type:"number",value:x.baseSalary,onChange:A,placeholder:"6000",required:!0}),(0,b.jsx)(e,{label:"Gross Salary",name:"grossSalary",type:"number",value:x.grossSalary,onChange:A,placeholder:"8000",required:!0})]})}),p&&(0,b.jsx)(i,{item:p,fields:[{key:"grade",label:"Grade / Position"},{key:"baseSalary",label:"Base Salary",render:a=>`$${a.toLocaleString()}`},{key:"grossSalary",label:"Gross Salary",render:a=>`$${a.toLocaleString()}`},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>q(null)})]})}function r(){let[a,g]=(0,c.useState)([]),[k,m]=(0,c.useState)(!0),[n,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)({type:"",amount:"",description:""});(0,c.useEffect)(()=>{A()},[]);let A=async()=>{try{m(!0);let a=await l.get("/payroll-configuration/pay-types");g(Array.isArray(a)?a:[])}catch(a){console.error("Error fetching pay types:",a),x("Failed to load pay types")}finally{m(!1)}},B=a=>{let{name:b,value:c}=a.target;z(a=>({...a,[b]:c}))},C=async a=>{a.preventDefault(),v(!0),x("");try{let a=""===y.amount?0:parseFloat(y.amount);if(!y.type){x("Pay type is required"),v(!1);return}if(a<6e3){x("Amount must be at least 6000"),v(!1);return}let b={type:y.type,amount:a,description:y.description||void 0};s?await l.patch(`/payroll-configuration/pay-types/${s._id}`,b):await l.post("/payroll-configuration/pay-types",b),await A(),p(!1),E()}catch(a){x(a.message||"Failed to save pay type")}finally{v(!1)}},D=async a=>{if(window.confirm("Are you sure you want to delete this pay type?"))try{await l.delete(`/payroll-configuration/pay-types/${a._id}`),await A()}catch(a){x(a.message||"Failed to delete pay type")}},E=()=>{z({type:"",amount:"",description:""}),t(null)},F=[{key:"type",label:"Type",render:a=>a.charAt(0).toUpperCase()+a.slice(1)},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"description",label:"Description"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Pay Types",data:a,columns:F,onAdd:()=>{E(),p(!0)},onEdit:a=>{t(a),z({type:a.type,amount:a.amount.toString(),description:a.description||""}),p(!0)},onView:r,onDelete:D,isLoading:k,emptyMessage:"No pay types configured yet"}),(0,b.jsx)(d,{isOpen:n,title:s?"Edit Pay Type":"Create Pay Type",onClose:()=>p(!1),size:"md",children:(0,b.jsxs)(f,{onSubmit:C,isSubmitting:u,onCancel:()=>p(!1),submitLabel:s?"Update":"Create",children:[w&&(0,b.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:w}),(0,b.jsx)(e,{label:"Pay Type",name:"type",type:"select",value:y.type,onChange:B,options:o,required:!0}),(0,b.jsx)(e,{label:"Amount",name:"amount",type:"number",value:y.amount,onChange:B,placeholder:"6000",required:!0}),(0,b.jsx)(e,{label:"Description",name:"description",type:"textarea",value:y.description,onChange:B,placeholder:"Describe the pay type (optional)"})]})}),q&&(0,b.jsx)(i,{item:q,fields:[{key:"type",label:"Pay Type",render:a=>a.charAt(0).toUpperCase()+a.slice(1)},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"description",label:"Description"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>r(null)})]})}function s(){let[a,g]=(0,c.useState)([]),[k,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({name:"",amount:""});(0,c.useEffect)(()=>{z()},[]);let z=async()=>{try{m(!0);let a=await l.get("/payroll-configuration/allowances");g(Array.isArray(a)?a:[])}catch(a){console.error("Error fetching allowances:",a),w("Failed to load allowances")}finally{m(!1)}},A=a=>{let{name:b,value:c}=a.target;y(a=>({...a,[b]:c}))},B=async a=>{a.preventDefault(),u(!0),w("");try{let a={name:x.name,amount:parseFloat(x.amount)};r?await l.patch(`/payroll-configuration/allowances/${r._id}`,a):await l.post("/payroll-configuration/allowances",a),await z(),o(!1),D()}catch(a){w(a.message||"Failed to save allowance")}finally{u(!1)}},C=async a=>{if(window.confirm("Are you sure you want to delete this allowance?"))try{await l.delete(`/payroll-configuration/allowances/${a._id}`),await z()}catch(a){w(a.message||"Failed to delete allowance")}},D=()=>{y({name:"",amount:""}),s(null)},E=[{key:"name",label:"Allowance Name"},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Allowances",data:a,columns:E,onAdd:()=>{D(),o(!0)},onEdit:a=>{s(a),y({name:a.name,amount:a.amount.toString()}),o(!0)},onView:q,onDelete:C,isLoading:k,emptyMessage:"No allowances configured yet"}),(0,b.jsx)(d,{isOpen:n,title:r?"Edit Allowance":"Create Allowance",onClose:()=>o(!1),size:"md",children:(0,b.jsxs)(f,{onSubmit:B,isSubmitting:t,onCancel:()=>o(!1),submitLabel:r?"Update":"Create",children:[v&&(0,b.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:v}),(0,b.jsx)(e,{label:"Allowance Name",name:"name",value:x.name,onChange:A,placeholder:"e.g., Housing Allowance, Transport Allowance",required:!0}),(0,b.jsx)(e,{label:"Amount",name:"amount",type:"number",value:x.amount,onChange:A,placeholder:"0",required:!0})]})}),p&&(0,b.jsx)(i,{item:p,fields:[{key:"name",label:"Allowance Name"},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>q(null)})]})}function t(){let[a,g]=(0,c.useState)([]),[k,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({name:"",amount:"",description:""});(0,c.useEffect)(()=>{z()},[]);let z=async()=>{try{m(!0);let a=await l.get("/payroll-configuration/signing-bonus");g(Array.isArray(a)?a:[])}catch(a){console.error("Error fetching signing bonuses:",a),w("Failed to load signing bonuses")}finally{m(!1)}},A=a=>{let{name:b,value:c}=a.target;y(a=>({...a,[b]:c}))},B=async a=>{a.preventDefault(),u(!0),w("");try{let a={name:x.name,amount:parseFloat(x.amount),...x.description&&{description:x.description}};r?await l.patch(`/payroll-configuration/signing-bonus/${r._id}`,a):await l.post("/payroll-configuration/signing-bonus",a),await z(),o(!1),D()}catch(a){w(a.message||"Failed to save signing bonus")}finally{u(!1)}},C=async a=>{if(window.confirm("Are you sure you want to delete this signing bonus?"))try{await l.delete(`/payroll-configuration/signing-bonus/${a._id}`),await z()}catch(a){w(a.message||"Failed to delete signing bonus")}},D=()=>{y({name:"",amount:"",description:""}),s(null)},E=[{key:"name",label:"Bonus Name"},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Signing Bonuses",data:a,columns:E,onAdd:()=>{D(),o(!0)},onEdit:a=>{s(a),y({name:a.name,amount:a.amount.toString(),description:a.description||""}),o(!0)},onView:q,onDelete:C,isLoading:k,emptyMessage:"No signing bonuses configured yet"}),(0,b.jsx)(d,{isOpen:n,title:r?"Edit Signing Bonus":"Create Signing Bonus",onClose:()=>o(!1),size:"md",children:(0,b.jsxs)(f,{onSubmit:B,isSubmitting:t,onCancel:()=>o(!1),submitLabel:r?"Update":"Create",children:[v&&(0,b.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:v}),(0,b.jsx)(e,{label:"Bonus Name",name:"name",value:x.name,onChange:A,placeholder:"e.g., New Graduate Signing Bonus",required:!0}),(0,b.jsx)(e,{label:"Amount",name:"amount",type:"number",value:x.amount,onChange:A,placeholder:"0",required:!0}),(0,b.jsx)(e,{label:"Description",name:"description",type:"textarea",value:x.description,onChange:A,placeholder:"Optional description"})]})}),p&&(0,b.jsx)(i,{item:p,fields:[{key:"name",label:"Bonus Name"},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>q(null)})]})}function u(){let[a,g]=(0,c.useState)([]),[k,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({name:"",amount:"",terms:""});(0,c.useEffect)(()=>{z()},[]);let z=async()=>{try{m(!0);let a=await l.get("/payroll-configuration/termination-benefit");g(Array.isArray(a)?a:[])}catch(a){console.error("Error fetching termination benefits:",a),w("Failed to load termination benefits")}finally{m(!1)}},A=a=>{let{name:b,value:c}=a.target;y(a=>({...a,[b]:c}))},B=async a=>{a.preventDefault(),u(!0),w("");try{let a={name:x.name,amount:parseFloat(x.amount),terms:x.terms};r?await l.patch(`/payroll-configuration/termination-benefit/${r._id}`,a):await l.post("/payroll-configuration/termination-benefit",a),await z(),o(!1),D()}catch(a){w(a.message||"Failed to save termination benefit")}finally{u(!1)}},C=async a=>{if(window.confirm("Are you sure you want to delete this termination benefit?"))try{await l.delete(`/payroll-configuration/termination-benefit/${a._id}`),await z()}catch(a){w(a.message||"Failed to delete termination benefit")}},D=()=>{y({name:"",amount:"",terms:""}),s(null)},E=[{key:"name",label:"Benefit Name"},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"terms",label:"Terms"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Termination & Resignation Benefits",data:a,columns:E,onAdd:()=>{D(),o(!0)},onEdit:a=>{s(a),y({name:a.name,amount:a.amount.toString(),terms:a.terms||""}),o(!0)},onView:q,onDelete:C,isLoading:k,emptyMessage:"No termination benefits configured yet"}),(0,b.jsx)(d,{isOpen:n,title:r?"Edit Termination Benefit":"Create Termination Benefit",onClose:()=>o(!1),size:"lg",children:(0,b.jsxs)(f,{onSubmit:B,isSubmitting:t,onCancel:()=>o(!1),submitLabel:r?"Update":"Create",children:[v&&(0,b.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:v}),(0,b.jsx)(e,{label:"Benefit Name",name:"name",value:x.name,onChange:A,placeholder:"e.g., End of Service Gratuity",required:!0}),(0,b.jsx)(e,{label:"Amount",name:"amount",type:"number",value:x.amount,onChange:A,placeholder:"0",required:!0}),(0,b.jsx)(e,{label:"Terms & Conditions",name:"terms",type:"textarea",value:x.terms,onChange:A,placeholder:"Describe the terms of this benefit (optional)"})]})}),p&&(0,b.jsx)(i,{item:p,fields:[{key:"name",label:"Benefit Name"},{key:"amount",label:"Amount",render:a=>`$${a.toLocaleString()}`},{key:"terms",label:"Terms"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>q(null)})]})}function v(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(null),[g,k]=(0,c.useState)(!0);(0,c.useEffect)(()=>{m()},[]);let m=async()=>{k(!0);let a=await l.get("/payroll-configuration/insurance-brackets");d(Array.isArray(a)?a:[]),k(!1)},n=async(a,b)=>{await l.patch(`/payroll-configuration/insurance-brackets/${a}/status`,{status:b}),m()},o=[{key:"name",label:"Name"},{key:"minSalary",label:"Min Salary"},{key:"maxSalary",label:"Max Salary"},{key:"status",label:"Status",render:(a,c)=>(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)(j,{status:a}),"draft"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>n(c._id,"approved"),className:"text-green-600 text-sm",children:"Approve"}),(0,b.jsx)("button",{onClick:()=>n(c._id,"rejected"),className:"text-red-600 text-sm",children:"Reject"})]})]})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Insurance Brackets (HR Approval)",data:a,columns:o,onAdd:()=>{},onView:f,isLoading:g}),e&&(0,b.jsx)(i,{item:e,fields:[{key:"name",label:"Name"},{key:"minSalary",label:"Min Salary"},{key:"maxSalary",label:"Max Salary"},{key:"employeeRate",label:"Employee Rate (%)"},{key:"employerRate",label:"Employer Rate (%)"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>f(null)})]})}function w(){let[a,g]=(0,c.useState)([]),[k,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)({name:"",description:"",rate:""});(0,c.useEffect)(()=>{v()},[]);let v=async()=>{m(!0);let a=await l.get("/payroll-configuration/tax-rule");g(Array.isArray(a)?a:[]),m(!1)},w=a=>{let{name:b,value:c}=a.target;u(a=>({...a,[b]:c}))},x=async a=>{a.preventDefault();let b={name:t.name,description:t.description,rate:Number(t.rate)};r?await l.patch(`/payroll-configuration/tax-rule/${r._id}`,b):await l.post("/payroll-configuration/tax-rule",b),o(!1),s(null),v()},y=[{key:"name",label:"Name"},{key:"rate",label:"Rate (%)"},{key:"status",label:"Status",render:(a,c)=>(0,b.jsx)(j,{status:c.status})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{title:"Tax Rules",data:a,columns:y,onAdd:()=>o(!0),onEdit:a=>{s(a),u({name:a.name,description:a.description||"",rate:a.rate.toString()}),o(!0)},onView:q,isLoading:k}),(0,b.jsx)(d,{isOpen:n,title:"Tax Rule",onClose:()=>o(!1),children:(0,b.jsxs)(f,{onSubmit:x,children:[(0,b.jsx)(e,{label:"Name",name:"name",value:t.name,onChange:w,required:!0}),(0,b.jsx)(e,{label:"Description",name:"description",type:"textarea",value:t.description,onChange:w}),(0,b.jsx)(e,{label:"Rate (%)",name:"rate",type:"number",value:t.rate,onChange:w,required:!0})]})}),p&&(0,b.jsx)(i,{item:p,fields:[{key:"name",label:"Name"},{key:"rate",label:"Rate (%)"},{key:"status",label:"Status",render:a=>(0,b.jsx)(j,{status:a})}],onClose:()=>q(null)})]})}function x(){let[a,d]=(0,c.useState)("policies");return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Payroll Configuration"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage payroll policies, pay grades, and compensation structures"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-8 border-b border-gray-200",children:[{id:"policies",label:"Payroll Policies",icon:"ðŸ“‹"},{id:"grades",label:"Pay Grades",icon:"ðŸ“Š"},{id:"types",label:"Pay Types",icon:"ðŸ’°"},{id:"allowances",label:"Allowances",icon:"âž•"},{id:"bonuses",label:"Signing Bonuses",icon:"ðŸŽ"},{id:"termination",label:"Termination Benefits",icon:"ðŸšª"},{id:"tax",label:"Tax Rules",icon:"ðŸ§¾"},{id:"insurance",label:"Insurance Brackets",icon:"ðŸ¥"}].map(c=>(0,b.jsxs)("button",{onClick:()=>d(c.id),className:`px-4 py-3 font-medium transition-colors whitespace-nowrap ${a===c.id?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[(0,b.jsx)("span",{className:"mr-2",children:c.icon}),c.label]},c.id))}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow",children:["policies"===a&&(0,b.jsx)(p,{}),"grades"===a&&(0,b.jsx)(q,{}),"types"===a&&(0,b.jsx)(r,{}),"allowances"===a&&(0,b.jsx)(s,{}),"bonuses"===a&&(0,b.jsx)(t,{}),"termination"===a&&(0,b.jsx)(u,{}),"tax"===a&&(0,b.jsx)(w,{}),"insurance"===a&&(0,b.jsx)(v,{})]})]})})}a.s(["default",()=>x],74614)}];

//# sourceMappingURL=2f5e2_payroll-configuration_frontend_src_app_payroll-configuration_page_tsx_d88a18e2._.js.map