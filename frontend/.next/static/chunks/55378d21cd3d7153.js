(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15121,e=>{"use strict";var t=e.i(1552),a=e.i(83784);function l({isOpen:e,title:a,children:l,onClose:n,size:r="md"}){return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:`bg-white rounded-lg shadow-xl ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"}[r]}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:a}),(0,t.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-6 max-h-96 overflow-y-auto",children:l})]})}):null}function n({label:e,name:a,type:l="text",value:n,onChange:r,required:i=!1,disabled:s=!1,error:o,placeholder:d,children:c,options:u}){let y="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition text-black bg-white";return(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-gray-700 font-medium mb-2",children:[e,i&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===l?(0,t.jsx)("textarea",{name:a,value:n,onChange:r,required:i,disabled:s,placeholder:d,className:`${y} ${s?"bg-gray-100 cursor-not-allowed":""}`,rows:4}):"select"===l?(0,t.jsxs)("select",{name:a,value:n,onChange:r,required:i,disabled:s,className:`${y} ${s?"bg-gray-100 cursor-not-allowed":""}`,children:[(0,t.jsxs)("option",{value:"",children:["Select ",e]}),u?.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,t.jsx)("input",{type:l,name:a,value:n,onChange:r,required:i,disabled:s,placeholder:d,className:`${y} ${s?"bg-gray-100 cursor-not-allowed":""}`}),o&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o})]})}function r({onSubmit:e,children:a,isSubmitting:l=!1,submitLabel:n="Save",cancelLabel:r="Cancel",onCancel:i}){return(0,t.jsxs)("form",{onSubmit:e,className:"space-y-6",children:[a,(0,t.jsxs)("div",{className:"flex gap-3 justify-end pt-6 border-t border-gray-200",children:[i&&(0,t.jsx)("button",{type:"button",onClick:i,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition",disabled:l,children:r}),(0,t.jsxs)("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&(0,t.jsx)("span",{className:"animate-spin",children:"âŒ›"}),n]})]})]})}function i({data:e,columns:l,onEdit:n,onView:r,onDelete:i,isLoading:s=!1,emptyMessage:o="No data available"}){let[d,c]=(0,a.useState)([]);return s?(0,t.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):0===e.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:o})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100 border-b border-gray-200",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:d.length===e.length&&e.length>0,onChange:()=>{d.length===e.length?c([]):c(e.map(e=>e._id||e.id))},className:"rounded"})}),l.map(e=>(0,t.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:e.label},e.key)),(n||r||i)&&(0,t.jsx)("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map((e,a)=>(0,t.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("input",{type:"checkbox",checked:d.includes(e._id||e.id),onChange:()=>{var t;return t=e._id||e.id,void c(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"rounded"})}),l.map(a=>(0,t.jsx)("td",{className:"px-4 py-3 text-gray-700",children:a.render?a.render(e[a.key],e):e[a.key]},`${e._id||e.id}-${a.key}`)),(n||r||i)&&(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex justify-center gap-2",children:[r&&(0,t.jsx)("button",{onClick:()=>r(e),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-sm font-medium transition",children:"View"}),n&&"draft"===e.status&&(0,t.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 text-green-600 hover:bg-green-50 rounded text-sm font-medium transition",children:"Edit"}),i&&"draft"===e.status&&(0,t.jsx)("button",{onClick:()=>i(e),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded text-sm font-medium transition",children:"Delete"})]})})]},e._id||e.id||a))})]})})}function s({title:e,data:a,columns:l,onAdd:n,onEdit:r,onView:s,onDelete:o,isLoading:d=!1,emptyMessage:c="No data available"}){return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e}),(0,t.jsxs)("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition flex items-center gap-2",children:[(0,t.jsx)("span",{children:"+"})," Add New"]})]}),(0,t.jsx)(i,{data:a,columns:l,onEdit:r,onView:s,onDelete:o,isLoading:d,emptyMessage:c})]})}function o({item:e,fields:a,onClose:n}){return(0,t.jsx)(l,{isOpen:!!e,title:"View Details",onClose:n,size:"lg",children:(0,t.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,t.jsxs)("div",{className:"border-b pb-3",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-600",children:a.label}),(0,t.jsx)("p",{className:"text-gray-900 mt-1",children:a.render?a.render(e[a.key]):e[a.key]})]},a.key))})})}function d({status:e,size:a="md"}){return(0,t.jsx)("span",{className:`font-semibold rounded-full ${{sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-2 text-base"}[a]} ${{draft:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[e]}`,children:{draft:"Draft",approved:"Approved",rejected:"Rejected"}[e]})}let c=e.i(43743).default.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",u={async get(e){let t=await fetch(`${c}${e}`,{method:"GET"});if(!t.ok){let e=await t.json().catch(()=>null);throw Error(e?.message||`API Error: ${t.status}`)}return t.json()},async post(e,t){console.log("API POST:",e,t);let a=await fetch(`${c}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json().catch(()=>null);throw Error(e?.message||`API Error: ${a.status}`)}return a.json()},async patch(e,t){let a=await fetch(`${c}${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json().catch(()=>null);throw Error(e?.message||`API Error: ${a.status}`)}return a.json()},async delete(e){let t=await fetch(`${c}${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json().catch(()=>null);throw Error(e?.message||`API Error: ${t.status}`)}if(204!==t.status)return t.json()}},y=Object.entries({DEDUCTION:"Deduction",ALLOWANCE:"Allowance",BENEFIT:"Benefit",MISCONDUCT:"Misconduct",LEAVE:"Leave"}).map(([e,t])=>({label:t,value:t})),m=Object.entries({ALL_EMPLOYEES:"All Employees",FULL_TIME:"Full Time Employees",PART_TIME:"Part Time Employees",CONTRACTORS:"Contractors"}).map(([e,t])=>({label:t,value:t})),p=Object.entries({HOURLY:"hourly",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",CONTRACT_BASED:"contract_based"}).map(([e,t])=>({label:t.charAt(0).toUpperCase()+t.slice(1),value:t}));function g(){let[e,i]=(0,a.useState)([]),[c,p]=(0,a.useState)(!0),[g,b]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[f,j]=(0,a.useState)(null),[S,w]=(0,a.useState)(!1),[N,v]=(0,a.useState)(""),[k,A]=(0,a.useState)({policyName:"",policyType:"",description:"",effectiveDate:"",ruleDefinition:{percentage:"",fixedAmount:"",threshold:""},applicability:""});(0,a.useEffect)(()=>{C()},[]);let C=async()=>{try{p(!0);let e=await u.get("/payroll-configuration/payroll-policies");i(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching policies:",e),v("Failed to load policies")}finally{p(!1)}},D=e=>{let{name:t,value:a}=e.target;if(t.startsWith("rule_")){let e=t.replace("rule_","");A(t=>({...t,ruleDefinition:{...t.ruleDefinition,[e]:""===a?"":parseFloat(a)}}))}else A(e=>({...e,[t]:a}))},E=async e=>{e.preventDefault(),w(!0),v("");try{if(!k.policyName.trim()){v("Policy name is required"),w(!1);return}if(!k.policyType){v("Policy type is required"),w(!1);return}if(!k.description.trim()){v("Description is required"),w(!1);return}if(!k.effectiveDate){v("Effective date is required"),w(!1);return}if(!k.applicability){v("Applicability is required"),w(!1);return}let e={...k,ruleDefinition:{...""!==k.ruleDefinition.percentage&&{percentage:Number(k.ruleDefinition.percentage)},...""!==k.ruleDefinition.fixedAmount&&{fixedAmount:Number(k.ruleDefinition.fixedAmount)},...""!==k.ruleDefinition.threshold&&{threshold:Number(k.ruleDefinition.threshold)}}};f?await u.patch(`/payroll-configuration/payroll-policies/${f._id}`,e):await u.post("/payroll-configuration/payroll-policies",e),await C(),b(!1),T()}catch(e){v(e.message||"Failed to save policy")}finally{w(!1)}},$=async e=>{if(window.confirm("Are you sure you want to delete this policy?"))try{await u.delete(`/payroll-configuration/payroll-policies/${e._id}`),await C()}catch(e){v(e.message||"Failed to delete policy")}},T=()=>{A({policyName:"",policyType:"",description:"",effectiveDate:"",ruleDefinition:{percentage:"",fixedAmount:"",threshold:""},applicability:""}),j(null)},L=[{key:"policyName",label:"Policy Name"},{key:"policyType",label:"Type"},{key:"applicability",label:"Applicability"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Payroll Policies",data:e,columns:L,onAdd:()=>{T(),b(!0)},onEdit:e=>{j(e),A({policyName:e.policyName,policyType:e.policyType,description:e.description,effectiveDate:e.effectiveDate.split("T")[0],ruleDefinition:{percentage:e.ruleDefinition.percentage?.toString()||"",fixedAmount:e.ruleDefinition.fixedAmount?.toString()||"",threshold:e.ruleDefinition.threshold?.toString()||""},applicability:e.applicability}),b(!0)},onView:h,onDelete:$,isLoading:c,emptyMessage:"No payroll policies configured yet"}),(0,t.jsx)(l,{isOpen:g,title:f?"Edit Payroll Policy":"Create Payroll Policy",onClose:()=>b(!1),size:"lg",children:(0,t.jsxs)(r,{onSubmit:E,isSubmitting:S,onCancel:()=>b(!1),submitLabel:f?"Update":"Create",children:[N&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:N}),(0,t.jsx)(n,{label:"Policy Name",name:"policyName",value:k.policyName,onChange:D,required:!0}),(0,t.jsx)(n,{label:"Policy Type",name:"policyType",type:"select",value:k.policyType,onChange:D,options:y,required:!0}),(0,t.jsx)(n,{label:"Description",name:"description",type:"textarea",value:k.description,onChange:D,required:!0}),(0,t.jsx)(n,{label:"Effective Date",name:"effectiveDate",type:"date",value:k.effectiveDate,onChange:D,required:!0}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Rule Definition"}),(0,t.jsx)(n,{label:"Percentage (%)",name:"rule_percentage",type:"number",value:k.ruleDefinition.percentage,onChange:D}),(0,t.jsx)(n,{label:"Fixed Amount",name:"rule_fixedAmount",type:"number",value:k.ruleDefinition.fixedAmount,onChange:D}),(0,t.jsx)(n,{label:"Threshold",name:"rule_threshold",type:"number",value:k.ruleDefinition.threshold,onChange:D})]}),(0,t.jsx)(n,{label:"Applicability",name:"applicability",type:"select",value:k.applicability,onChange:D,options:m,required:!0})]})}),x&&(0,t.jsx)(o,{item:x,fields:[{key:"policyName",label:"Policy Name"},{key:"policyType",label:"Policy Type"},{key:"description",label:"Description"},{key:"effectiveDate",label:"Effective Date",render:e=>new Date(e).toLocaleDateString()},{key:"ruleDefinition",label:"Rule Definition",render:e=>`Percentage: ${e.percentage}%, Fixed: ${e.fixedAmount}, Threshold: ${e.threshold}`},{key:"applicability",label:"Applicability"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>h(null)})]})}function b(){let[e,i]=(0,a.useState)([]),[c,y]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),[S,w]=(0,a.useState)(""),[N,v]=(0,a.useState)({grade:"",baseSalary:"",grossSalary:""});(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{y(!0);let e=await u.get("/payroll-configuration/pay-grades");i(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching pay grades:",e),w("Failed to load pay grades")}finally{y(!1)}},A=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},C=async e=>{e.preventDefault(),j(!0),w("");try{let e={grade:N.grade,baseSalary:parseFloat(N.baseSalary),grossSalary:parseFloat(N.grossSalary)};console.log("Sending payload:",JSON.stringify(e)),x?await u.patch(`/payroll-configuration/pay-grades/${x._id}`,e):await u.post("/payroll-configuration/pay-grades",e),await k(),p(!1),E()}catch(e){w(e.message||"Failed to save pay grade")}finally{j(!1)}},D=async e=>{if(window.confirm("Are you sure you want to delete this pay grade?"))try{await u.delete(`/payroll-configuration/pay-grades/${e._id}`),await k()}catch(e){w(e.message||"Failed to delete pay grade")}},E=()=>{v({grade:"",baseSalary:"",grossSalary:""}),h(null)},$=[{key:"grade",label:"Grade / Position"},{key:"baseSalary",label:"Base Salary",render:e=>`$${e.toLocaleString()}`},{key:"grossSalary",label:"Gross Salary",render:e=>`$${e.toLocaleString()}`},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Pay Grades",data:e,columns:$,onAdd:()=>{E(),p(!0)},onEdit:e=>{h(e),v({grade:e.grade,baseSalary:e.baseSalary.toString(),grossSalary:e.grossSalary.toString()}),p(!0)},onView:b,onDelete:D,isLoading:c,emptyMessage:"No pay grades configured yet"}),(0,t.jsx)(l,{isOpen:m,title:x?"Edit Pay Grade":"Create Pay Grade",onClose:()=>p(!1),size:"md",children:(0,t.jsxs)(r,{onSubmit:C,isSubmitting:f,onCancel:()=>p(!1),submitLabel:x?"Update":"Create",children:[S&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:S}),(0,t.jsx)(n,{label:"Grade / Position",name:"grade",value:N.grade,onChange:A,placeholder:"e.g., Senior Developer, Mid-Level TA",required:!0}),(0,t.jsx)(n,{label:"Base Salary",name:"baseSalary",type:"number",value:N.baseSalary,onChange:A,placeholder:"6000",required:!0}),(0,t.jsx)(n,{label:"Gross Salary",name:"grossSalary",type:"number",value:N.grossSalary,onChange:A,placeholder:"8000",required:!0})]})}),g&&(0,t.jsx)(o,{item:g,fields:[{key:"grade",label:"Grade / Position"},{key:"baseSalary",label:"Base Salary",render:e=>`$${e.toLocaleString()}`},{key:"grossSalary",label:"Gross Salary",render:e=>`$${e.toLocaleString()}`},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>b(null)})]})}function x(){let[e,i]=(0,a.useState)([]),[c,y]=(0,a.useState)(!0),[m,g]=(0,a.useState)(!1),[b,x]=(0,a.useState)(null),[h,f]=(0,a.useState)(null),[j,S]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),[v,k]=(0,a.useState)({type:"",amount:"",description:""});(0,a.useEffect)(()=>{A()},[]);let A=async()=>{try{y(!0);let e=await u.get("/payroll-configuration/pay-types");i(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching pay types:",e),N("Failed to load pay types")}finally{y(!1)}},C=e=>{let{name:t,value:a}=e.target;k(e=>({...e,[t]:a}))},D=async e=>{e.preventDefault(),S(!0),N("");try{let e=""===v.amount?0:parseFloat(v.amount);if(!v.type){N("Pay type is required"),S(!1);return}if(e<6e3){N("Amount must be at least 6000"),S(!1);return}let t={type:v.type,amount:e,description:v.description||void 0};h?await u.patch(`/payroll-configuration/pay-types/${h._id}`,t):await u.post("/payroll-configuration/pay-types",t),await A(),g(!1),$()}catch(e){N(e.message||"Failed to save pay type")}finally{S(!1)}},E=async e=>{if(window.confirm("Are you sure you want to delete this pay type?"))try{await u.delete(`/payroll-configuration/pay-types/${e._id}`),await A()}catch(e){N(e.message||"Failed to delete pay type")}},$=()=>{k({type:"",amount:"",description:""}),f(null)},T=[{key:"type",label:"Type",render:e=>e.charAt(0).toUpperCase()+e.slice(1)},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"description",label:"Description"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Pay Types",data:e,columns:T,onAdd:()=>{$(),g(!0)},onEdit:e=>{f(e),k({type:e.type,amount:e.amount.toString(),description:e.description||""}),g(!0)},onView:x,onDelete:E,isLoading:c,emptyMessage:"No pay types configured yet"}),(0,t.jsx)(l,{isOpen:m,title:h?"Edit Pay Type":"Create Pay Type",onClose:()=>g(!1),size:"md",children:(0,t.jsxs)(r,{onSubmit:D,isSubmitting:j,onCancel:()=>g(!1),submitLabel:h?"Update":"Create",children:[w&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:w}),(0,t.jsx)(n,{label:"Pay Type",name:"type",type:"select",value:v.type,onChange:C,options:p,required:!0}),(0,t.jsx)(n,{label:"Amount",name:"amount",type:"number",value:v.amount,onChange:C,placeholder:"6000",required:!0}),(0,t.jsx)(n,{label:"Description",name:"description",type:"textarea",value:v.description,onChange:C,placeholder:"Describe the pay type (optional)"})]})}),b&&(0,t.jsx)(o,{item:b,fields:[{key:"type",label:"Pay Type",render:e=>e.charAt(0).toUpperCase()+e.slice(1)},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"description",label:"Description"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>x(null)})]})}function h(){let[e,i]=(0,a.useState)([]),[c,y]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),[S,w]=(0,a.useState)(""),[N,v]=(0,a.useState)({name:"",amount:""});(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{y(!0);let e=await u.get("/payroll-configuration/allowances");i(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching allowances:",e),w("Failed to load allowances")}finally{y(!1)}},A=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},C=async e=>{e.preventDefault(),j(!0),w("");try{let e={name:N.name,amount:parseFloat(N.amount)};x?await u.patch(`/payroll-configuration/allowances/${x._id}`,e):await u.post("/payroll-configuration/allowances",e),await k(),p(!1),E()}catch(e){w(e.message||"Failed to save allowance")}finally{j(!1)}},D=async e=>{if(window.confirm("Are you sure you want to delete this allowance?"))try{await u.delete(`/payroll-configuration/allowances/${e._id}`),await k()}catch(e){w(e.message||"Failed to delete allowance")}},E=()=>{v({name:"",amount:""}),h(null)},$=[{key:"name",label:"Allowance Name"},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Allowances",data:e,columns:$,onAdd:()=>{E(),p(!0)},onEdit:e=>{h(e),v({name:e.name,amount:e.amount.toString()}),p(!0)},onView:b,onDelete:D,isLoading:c,emptyMessage:"No allowances configured yet"}),(0,t.jsx)(l,{isOpen:m,title:x?"Edit Allowance":"Create Allowance",onClose:()=>p(!1),size:"md",children:(0,t.jsxs)(r,{onSubmit:C,isSubmitting:f,onCancel:()=>p(!1),submitLabel:x?"Update":"Create",children:[S&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:S}),(0,t.jsx)(n,{label:"Allowance Name",name:"name",value:N.name,onChange:A,placeholder:"e.g., Housing Allowance, Transport Allowance",required:!0}),(0,t.jsx)(n,{label:"Amount",name:"amount",type:"number",value:N.amount,onChange:A,placeholder:"0",required:!0})]})}),g&&(0,t.jsx)(o,{item:g,fields:[{key:"name",label:"Allowance Name"},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>b(null)})]})}function f(){let[e,i]=(0,a.useState)([]),[c,y]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),[S,w]=(0,a.useState)(""),[N,v]=(0,a.useState)({name:"",amount:"",description:""});(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{y(!0);let e=await u.get("/payroll-configuration/signing-bonus");i(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching signing bonuses:",e),w("Failed to load signing bonuses")}finally{y(!1)}},A=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},C=async e=>{e.preventDefault(),j(!0),w("");try{let e={name:N.name,amount:parseFloat(N.amount),...N.description&&{description:N.description}};x?await u.patch(`/payroll-configuration/signing-bonus/${x._id}`,e):await u.post("/payroll-configuration/signing-bonus",e),await k(),p(!1),E()}catch(e){w(e.message||"Failed to save signing bonus")}finally{j(!1)}},D=async e=>{if(window.confirm("Are you sure you want to delete this signing bonus?"))try{await u.delete(`/payroll-configuration/signing-bonus/${e._id}`),await k()}catch(e){w(e.message||"Failed to delete signing bonus")}},E=()=>{v({name:"",amount:"",description:""}),h(null)},$=[{key:"name",label:"Bonus Name"},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Signing Bonuses",data:e,columns:$,onAdd:()=>{E(),p(!0)},onEdit:e=>{h(e),v({name:e.name,amount:e.amount.toString(),description:e.description||""}),p(!0)},onView:b,onDelete:D,isLoading:c,emptyMessage:"No signing bonuses configured yet"}),(0,t.jsx)(l,{isOpen:m,title:x?"Edit Signing Bonus":"Create Signing Bonus",onClose:()=>p(!1),size:"md",children:(0,t.jsxs)(r,{onSubmit:C,isSubmitting:f,onCancel:()=>p(!1),submitLabel:x?"Update":"Create",children:[S&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:S}),(0,t.jsx)(n,{label:"Bonus Name",name:"name",value:N.name,onChange:A,placeholder:"e.g., New Graduate Signing Bonus",required:!0}),(0,t.jsx)(n,{label:"Amount",name:"amount",type:"number",value:N.amount,onChange:A,placeholder:"0",required:!0}),(0,t.jsx)(n,{label:"Description",name:"description",type:"textarea",value:N.description,onChange:A,placeholder:"Optional description"})]})}),g&&(0,t.jsx)(o,{item:g,fields:[{key:"name",label:"Bonus Name"},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>b(null)})]})}function j(){let[e,i]=(0,a.useState)([]),[c,y]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),[S,w]=(0,a.useState)(""),[N,v]=(0,a.useState)({name:"",amount:"",terms:""});(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{y(!0);let e=await u.get("/payroll-configuration/termination-benefit");i(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching termination benefits:",e),w("Failed to load termination benefits")}finally{y(!1)}},A=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},C=async e=>{e.preventDefault(),j(!0),w("");try{let e={name:N.name,amount:parseFloat(N.amount),terms:N.terms};x?await u.patch(`/payroll-configuration/termination-benefit/${x._id}`,e):await u.post("/payroll-configuration/termination-benefit",e),await k(),p(!1),E()}catch(e){w(e.message||"Failed to save termination benefit")}finally{j(!1)}},D=async e=>{if(window.confirm("Are you sure you want to delete this termination benefit?"))try{await u.delete(`/payroll-configuration/termination-benefit/${e._id}`),await k()}catch(e){w(e.message||"Failed to delete termination benefit")}},E=()=>{v({name:"",amount:"",terms:""}),h(null)},$=[{key:"name",label:"Benefit Name"},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"terms",label:"Terms"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Termination & Resignation Benefits",data:e,columns:$,onAdd:()=>{E(),p(!0)},onEdit:e=>{h(e),v({name:e.name,amount:e.amount.toString(),terms:e.terms||""}),p(!0)},onView:b,onDelete:D,isLoading:c,emptyMessage:"No termination benefits configured yet"}),(0,t.jsx)(l,{isOpen:m,title:x?"Edit Termination Benefit":"Create Termination Benefit",onClose:()=>p(!1),size:"lg",children:(0,t.jsxs)(r,{onSubmit:C,isSubmitting:f,onCancel:()=>p(!1),submitLabel:x?"Update":"Create",children:[S&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:S}),(0,t.jsx)(n,{label:"Benefit Name",name:"name",value:N.name,onChange:A,placeholder:"e.g., End of Service Gratuity",required:!0}),(0,t.jsx)(n,{label:"Amount",name:"amount",type:"number",value:N.amount,onChange:A,placeholder:"0",required:!0}),(0,t.jsx)(n,{label:"Terms & Conditions",name:"terms",type:"textarea",value:N.terms,onChange:A,placeholder:"Describe the terms of this benefit (optional)"})]})}),g&&(0,t.jsx)(o,{item:g,fields:[{key:"name",label:"Benefit Name"},{key:"amount",label:"Amount",render:e=>`$${e.toLocaleString()}`},{key:"terms",label:"Terms"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>b(null)})]})}function S(){let[e,l]=(0,a.useState)([]),[n,r]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{y()},[]);let y=async()=>{c(!0);let e=await u.get("/payroll-configuration/insurance-brackets");l(Array.isArray(e)?e:[]),c(!1)},m=async(e,t)=>{await u.patch(`/payroll-configuration/insurance-brackets/${e}/status`,{status:t}),y()},p=[{key:"name",label:"Name"},{key:"minSalary",label:"Min Salary"},{key:"maxSalary",label:"Max Salary"},{key:"status",label:"Status",render:(e,a)=>(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(d,{status:e}),"draft"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>m(a._id,"approved"),className:"text-green-600 text-sm",children:"Approve"}),(0,t.jsx)("button",{onClick:()=>m(a._id,"rejected"),className:"text-red-600 text-sm",children:"Reject"})]})]})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Insurance Brackets (HR Approval)",data:e,columns:p,onAdd:()=>{},onView:r,isLoading:i}),n&&(0,t.jsx)(o,{item:n,fields:[{key:"name",label:"Name"},{key:"minSalary",label:"Min Salary"},{key:"maxSalary",label:"Max Salary"},{key:"employeeRate",label:"Employee Rate (%)"},{key:"employerRate",label:"Employer Rate (%)"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>r(null)})]})}function w(){let[e,i]=(0,a.useState)([]),[c,y]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),[f,j]=(0,a.useState)({name:"",description:"",rate:""});(0,a.useEffect)(()=>{S()},[]);let S=async()=>{y(!0);let e=await u.get("/payroll-configuration/tax-rule");i(Array.isArray(e)?e:[]),y(!1)},w=e=>{let{name:t,value:a}=e.target;j(e=>({...e,[t]:a}))},N=async e=>{e.preventDefault();let t={name:f.name,description:f.description,rate:Number(f.rate)};x?await u.patch(`/payroll-configuration/tax-rule/${x._id}`,t):await u.post("/payroll-configuration/tax-rule",t),p(!1),h(null),S()},v=[{key:"name",label:"Name"},{key:"rate",label:"Rate (%)"},{key:"status",label:"Status",render:(e,a)=>(0,t.jsx)(d,{status:a.status})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{title:"Tax Rules",data:e,columns:v,onAdd:()=>p(!0),onEdit:e=>{h(e),j({name:e.name,description:e.description||"",rate:e.rate.toString()}),p(!0)},onView:b,isLoading:c}),(0,t.jsx)(l,{isOpen:m,title:"Tax Rule",onClose:()=>p(!1),children:(0,t.jsxs)(r,{onSubmit:N,children:[(0,t.jsx)(n,{label:"Name",name:"name",value:f.name,onChange:w,required:!0}),(0,t.jsx)(n,{label:"Description",name:"description",type:"textarea",value:f.description,onChange:w}),(0,t.jsx)(n,{label:"Rate (%)",name:"rate",type:"number",value:f.rate,onChange:w,required:!0})]})}),g&&(0,t.jsx)(o,{item:g,fields:[{key:"name",label:"Name"},{key:"rate",label:"Rate (%)"},{key:"status",label:"Status",render:e=>(0,t.jsx)(d,{status:e})}],onClose:()=>b(null)})]})}function N(){let[e,l]=(0,a.useState)("policies");return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Payroll Configuration"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage payroll policies, pay grades, and compensation structures"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-8 border-b border-gray-200",children:[{id:"policies",label:"Payroll Policies",icon:"ðŸ“‹"},{id:"grades",label:"Pay Grades",icon:"ðŸ“Š"},{id:"types",label:"Pay Types",icon:"ðŸ’°"},{id:"allowances",label:"Allowances",icon:"âž•"},{id:"bonuses",label:"Signing Bonuses",icon:"ðŸŽ"},{id:"termination",label:"Termination Benefits",icon:"ðŸšª"},{id:"tax",label:"Tax Rules",icon:"ðŸ§¾"},{id:"insurance",label:"Insurance Brackets",icon:"ðŸ¥"}].map(a=>(0,t.jsxs)("button",{onClick:()=>l(a.id),className:`px-4 py-3 font-medium transition-colors whitespace-nowrap ${e===a.id?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[(0,t.jsx)("span",{className:"mr-2",children:a.icon}),a.label]},a.id))}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:["policies"===e&&(0,t.jsx)(g,{}),"grades"===e&&(0,t.jsx)(b,{}),"types"===e&&(0,t.jsx)(x,{}),"allowances"===e&&(0,t.jsx)(h,{}),"bonuses"===e&&(0,t.jsx)(f,{}),"termination"===e&&(0,t.jsx)(j,{}),"tax"===e&&(0,t.jsx)(w,{}),"insurance"===e&&(0,t.jsx)(S,{})]})]})})}e.s(["default",()=>N],15121)}]);